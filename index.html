<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Búsqueda de Pacientes | NUEVO PROYECTO</title>
  
  <link rel="icon" href="INYE.png" type="image/png"> 
  <link rel="shortcut icon" href="INYE.png" type="image/png"> 

  <style>
:root{
  --primary-color: #00bcd4; /* Azul cian principal */
  --secondary-color: #34495e; /* Azul oscuro para encabezados */
  --bg-light: #f4f6f9; /* Fondo muy claro */
  --card-bg: #ffffff;
  --success-btn: #4CAF50;
  --danger-tag: #e74c3c;
  --safe-tag: #2ecc71;
}

*{
  box-sizing:border-box;
}

body{
  margin:0;
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background:var(--bg-light);
  color:#333;
}

.container{
  max-width:1000px;
  margin:0 auto;
  padding:20px;
}

.site-header{
  padding:30px 0;
  text-align:center;
  background:var(--secondary-color);
  color:var(--card-bg);
  box-shadow:0 4px 15px rgba(0,0,0,0.1);
  margin-bottom:25px;
}

.site-header h1{
    margin: 0;
    font-size: 1.8em;
}

.panel{
  background:var(--card-bg);
  padding:25px;
  border-radius:10px;
  box-shadow:0 5px 15px rgba(0,0,0,0.08);
  margin-bottom:20px;
}

.search-panel{
  text-align:center;
  /* CORRECCIÓN: Limitar el ancho del panel de búsqueda y centrarlo */
  max-width: 550px; /* Reducido a 550px para hacerlo más compacto */
  margin-left: auto;
  margin-right: auto;
}

.search-panel h2{
  color:var(--primary-color);
  margin-top:0;
  font-size: 1.5em;
  border-bottom: 2px solid #ecf0f1;
  padding-bottom: 10px;
}

/* Contenedor para centrar el ancho limitado de los inputs */
.input-container-wrap {
    display: flex;
    justify-content: center; /* Centra el contenido */
}

/* Ancho limitado para los campos de búsqueda */
.search-controls{
  display:flex; 
  flex-direction: column; 
  gap:15px; 
  margin-bottom:20px;
  width: 100%;
  max-width: 450px; /* Ancho máximo para que no se vea muy largo */
}

.search-controls input{
  width: 100%; 
  padding:12px 15px;
  border-radius:8px;
  border:1px solid #bdc3c7;
  font-size:1em;
  transition: border-color 0.3s;
}

.search-controls input:focus{
    border-color: var(--primary-color);
    outline: none;
}

.actions{
  display:flex;
  gap:15px;
  justify-content:center;
}

button{
  padding:12px 25px;
  border-radius:8px;
  border:0;
  cursor:pointer;
  font-weight:600;
  font-size:1em;
  transition:background 0.3s, transform 0.1s;
}

#btnSearch{
  background:var(--success-btn);
  color:#fff;
}

#btnSearch:hover{
  background:#3e8e41;
  transform: translateY(-1px);
}

#btnClear{
  background:#ecf0f1;
  color:#333;
}

#btnClear:hover{
  background:#bdc3c7;
}

.table-panel{
  display:none; 
}

.table-wrap{
  overflow-x:auto;
  max-height:600px;
}

#resultsTable{
  width:100%;
  border-collapse:separate; 
  border-spacing: 0;
  border-radius:10px;
  overflow:hidden;
}

/* Centrar el contenido de las últimas dos columnas */
#resultsTable th:nth-child(4), #resultsTable td:nth-child(4), 
#resultsTable th:nth-child(5), #resultsTable td:nth-child(5) {
    text-align: center;
}

/* FRANJAS DE LA TABLA MÁS DELGADAS */
#resultsTable th, #resultsTable td{
  padding:10px; 
  font-size:0.95em;
  white-space:nowrap;
}

#resultsTable thead{
  background:var(--secondary-color);
  color:#fff;
  position:sticky;
  top:0;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

#resultsTable tbody tr:nth-child(even){
  background:#f9f9f9;
}

#resultsTable tbody tr:hover{
  background:#eaf2f8;
}

/* Estilos específicos para la columna ESTADO */
.tag-apto {
    display: inline-block;
    padding: 5px 10px;
    border-radius: 20px;
    background-color: var(--safe-tag);
    color: white;
    font-weight: bold;
    font-size: 0.85em;
}

.tag-no-apto {
    display: inline-block;
    padding: 5px 10px;
    border-radius: 20px;
    background-color: var(--danger-tag);
    color: white;
    font-weight: bold;
    font-size: 0.85em;
}

.no-results{
  text-align:center;
  padding:30px;
  color:var(--secondary-color);
  font-size:1.2em;
  font-weight: 600;
}

@media (max-width: 600px) {
    .actions {
        flex-direction: column;
    }
    button {
        width: 100%;
    }
    .search-controls, .search-panel { /* En pantallas pequeñas, no limitamos el ancho */
        max-width: 100%;
    }
}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>BÚSQUEDA DE PACIENTES</h1>
    </div>
  </header>

  <main class="container">
    <section class="panel search-panel">
      <h2>Consulta de Estado y Cita</h2> 
      
      <div class="input-container-wrap">
          <div class="search-controls">
            <input id="nombreSearch" placeholder="Nombres y Apellidos" />
            <input id="dniSearch" placeholder="DNI" />
          </div>
      </div>
      
      <div class="actions">
        <button id="btnSearch">Buscar</button>
        <button id="btnClear">Limpiar Búsqueda</button>
      </div>
    </section>

    <section id="resultsSection" class="panel table-panel">
      <h2>Resultados de la Búsqueda</h2> 
      <div class="table-wrap">
        <table id="resultsTable">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombres y Apellidos</th>
              <th>DNI</th>
              <th>Estado</th>
              <th>Fecha de Cita</th>
            </tr>
          </thead>
          <tbody>
            </tbody>
        </table>
      </div>
      <div id="noResults" class="no-results" style="display:none;">
        ❌ No se encontraron resultados que coincidan con la búsqueda.
      </div>
    </section>
  </main>

  <script>

// =========================================================
// !!! BASE DE DATOS DE PACIENTES FINALES (10 REGISTROS) !!!
// ----------------------------------------------------------------------
const initialData = [
  // --- GRUPO APTO ---
  { id: 1, nombre: "JUAN BAUTISTA GASCO SAAVEDRA", dni: "10687088", estado: "Apto", fecha: "1/10/2025" },
  { id: 2, nombre: "MARIA DEL ROSARIO EYZAGUIRRE ARENAS", dni: "22091902", estado: "Apto", fecha: "1/10/2025" },
  { id: 3, nombre: "GIOVANA VILMA CAMPOS ORTIZ", dni: "06669511", estado: "Apto", fecha: "1/10/2025" },
  { id: 4, nombre: "ROSA MERCEDES CARDENAS ORTIZ", dni: "08086291", estado: "Apto", fecha: "1/10/2025" },
  { id: 5, nombre: "MARTIN CESAR CORDOVA ORDOÑEZ", dni: "06863771", estado: "Apto", fecha: "1/10/2025" },
  
  // --- GRUPO NO APTO ---
  { id: 6, nombre: "MOZOMBITE AQUITUARI JOSE ADRIANO", dni: "09756090", estado: "No Apto", fecha: "" },
  { id: 7, nombre: "SANTOS PADILLA ANGELICA GLORIA", dni: "09184030", estado: "No Apto", fecha: "" },
  { id: 8, nombre: "FERNANDEZ QUISPE SONIA ALEXANDRA", dni: "47078250", estado: "No Apto", fecha: "" },
  { id: 9, nombre: "TAPIA FLORES SHEYLA ISABEL", dni: "76272978", estado: "No Apto", fecha: "" },
  { id: 10, nombre: "TRUJILLANO CAVERO JUAN MANUEL", dni: "08682006", estado: "No Apto", fecha: "" },
];
// =========================================================

const tbody = document.querySelector('#resultsTable tbody');
const nombreSearchInput = document.getElementById('nombreSearch');
const dniSearchInput = document.getElementById('dniSearch');
const btnSearch = document.getElementById('btnSearch');
const btnClear = document.getElementById('btnClear');
const noResultsDiv = document.getElementById('noResults');
const resultsSection = document.getElementById('resultsSection');

// Función de seguridad
function escapeHtml(s){ 
  return String(s).replace(/[&<>"']/g, m => ({
    '&':'&amp;',
    '<':'&lt;',
    '>':'&lt;',
    '"':'&quot;',
    "'":'&#39;'
  }[m])); 
}

function renderTable(list){
  tbody.innerHTML = '';
  resultsSection.style.display = 'block'; 

  if (list.length === 0) {
    noResultsDiv.style.display = 'block';
    return;
  }
  noResultsDiv.style.display = 'none';

  list.forEach((p) => {
    
    // LÓGICA CONDICIONAL: Determina el contenido de la columna FECHA
    let fechaCita;
    const isApto = p.estado.toLowerCase() === 'apto';
    if (isApto) {
        fechaCita = escapeHtml(p.fecha || '');
    } else {
        fechaCita = 'Esperando Examen Pre-Quirúrgicos';
    }
    
    // LÓGICA DE ESTILOS: Determina el color del tag
    const estadoClass = isApto ? 'tag-apto' : 'tag-no-apto';
    
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${escapeHtml(p.id)}</td>
      <td>${escapeHtml(p.nombre || '')}</td>
      <td>${escapeHtml(p.dni || '')}</td>
      <td><span class="${estadoClass}">${escapeHtml(p.estado || '')}</span></td>
      <td>${fechaCita}</td>
    `;
    tbody.appendChild(tr);
  });
}

function handleSearch(){
  const nombreQuery = nombreSearchInput.value.trim().toLowerCase();
  const dniQuery = dniSearchInput.value.trim(); 

  if(!nombreQuery && !dniQuery) {
    alert('Debe ingresar el Nombre/Apellido o el DNI del paciente para iniciar la búsqueda.');
    resultsSection.style.display = 'none'; 
    return;
  }
  
  const results = initialData.filter(p => {
    let matchNombre = true;
    let matchDni = true;

    if (nombreQuery) {
        matchNombre = p.nombre.toLowerCase().includes(nombreQuery);
    }
    
    if (dniQuery) {
        matchDni = p.dni.includes(dniQuery);
    }

    return matchNombre && matchDni;
  });
  
  renderTable(results);
}

function handleClear(){
  nombreSearchInput.value = '';
  dniSearchInput.value = '';
  
  resultsSection.style.display = 'none'; 
  
  noResultsDiv.style.display = 'none';
  tbody.innerHTML = '';
}

btnSearch.addEventListener('click', handleSearch);
btnClear.addEventListener('click', handleClear);

nombreSearchInput.addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    handleSearch();
  }
});

dniSearchInput.addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    handleSearch();
  }
});
  </script>
</body>
</html>